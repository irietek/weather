var PilotWeather;PilotWeather=angular.module("PilotWeather",["ngRoute"]),PilotWeather.config(["$routeProvider",function(e){e.when("/",{templateUrl:"/templates/index.html",controller:"MainController"}).otherwise({redirectTo:"/"})}]),PilotWeather.factory("ForecastService",["$log","$http",function(e,t){return{request:function(e,o){var r="/forecast/"+e.cord+"/"+e.time;t.get(r).success(function(e){o&&o(e)}).error(function(e,t){console.log("error",e,t)})}}}]),PilotWeather.factory("PlotService",["$log","$http",function(e,t){return{request:function(e,o){var r="/forecast/"+e.orig+"/"+e.dest+"/"+moment(e.time).format("X")+"/"+e.speed;t.get(r).success(function(e){o&&o(e)}).error(function(e,t){console.log("error",e,t)})}}}]),PilotWeather.controller("MainController",[function(){$(function(){$("#inputTime").datetimepicker()})}]),PilotWeather.controller("PlotController",["$log","PlotService","ForecastService",function(e,t,o){var r;this.plot=null,this.time=null,this.display=!1,this.request={orig:"35.990511,-78.890954",dest:"26.146614,-80.332965",time:"02/23/2015 7:26 PM",speed:90},this.map={center:null,zoom:"6",size:"600x400",maptype:"&maptype=hybrid",path:"color:0xff0000ff|weight:4",start:"color:red%7Clabel:C%7C",end:"color:green%7Clabel:C%7C"},r=this,this.submit=function(e){r.request.time=$(e.currentTarget).find("#inputTime").val(),r.time=moment(r.request.time),t.request(r.request,r.forecast)},this.forecast=function(e){e.distance>601&&e.distance<1e3&&(r.map.zoom=4),e.distance>401&&e.distance<600&&(r.map.zoom=5),e.distance>200&&e.distance<400&&(r.map.zoom=6);var t=Math.floor(e.points.length/2);r.display=!0,r.map.center=e.points[t].current_cordinate,_.forEach(e.points,function(e){var t=r.time.add(e.time_elapsed,"hours"),i={cord:e.current_cordinate,time:t.format("X")};o.request(i,function(e){console.log("forecast",e)})})},e.debug("PlotController")}]);