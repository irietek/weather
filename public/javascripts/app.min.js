var PilotWeather;PilotWeather=angular.module("PilotWeather",["ngRoute"]),PilotWeather.config(["$routeProvider",function(t){t.when("/",{templateUrl:"/templates/index.html",controller:"MainController"}).otherwise({redirectTo:"/"})}]),PilotWeather.factory("AirportService",["$log","$http",function(t,e){return{airport:null,request:function(o,r){var i="/data/airports.json";e.get(i).success(function(t){r&&(airport=t,r(t))}).error(function(e,o){t.debug("error",e,o)})}}}]),PilotWeather.factory("ForecastService",["$log","$http",function(t,e){return{request:function(t,o){var r="/forecast/"+t.cord+"/"+t.time;e.get(r).success(function(t){o&&o(t)}).error(function(t,e){console.log("error",t,e)})}}}]),PilotWeather.factory("PlotService",["$log","$http",function(t,e){return{request:function(t,o){var r="/forecast/"+t.orig+"/"+t.dest+"/"+moment(t.time).format("X")+"/"+t.speed;e.get(r).success(function(t){o&&o(t)}).error(function(t,e){console.log("error",t,e)})}}}]),PilotWeather.controller("ForecastController",["$log","$rootScope","ForecastService",function(t,e,o){this.plot=[],this.display=!1;var r=this;e.$on("plot:forecast",function(t,e){r.display=!0,_.forEach(e.points,function(t){var i=e.time.add(t.time_elapsed,"hours"),n={cord:t.current_cordinate,time:i.format("X"),show:i.format("lll")};o.request(n,function(t){t.time=n.show,t.cord=n.cord,r.plot.push(t)})})})}]),PilotWeather.controller("MainController",[function(){$(function(){$("#inputTime").datetimepicker()})}]),PilotWeather.controller("PlotController",["$log","$rootScope","PlotService",function(t,e,o){var r;this.plot=null,this.time=null,this.display=!1,this.request={orig:"35.990511,-78.890954",dest:"26.146614,-80.332965",time:"02/23/2015 7:26 PM",speed:90},this.map={center:null,zoom:"6",size:"600x400",maptype:"&maptype=hybrid",path:"color:0xff0000ff|weight:4",start:"color:red%7Clabel:C%7C",end:"color:green%7Clabel:C%7C"},r=this,this.submit=function(t){r.request.time=$(t.currentTarget).find("#inputTime").val(),r.time=moment(r.request.time),o.request(r.request,r.forecast)},this.forecast=function(t){t.distance>601&&t.distance<1e3&&(r.map.zoom=4),t.distance>401&&t.distance<600&&(r.map.zoom=5),t.distance>200&&t.distance<400&&(r.map.zoom=6);var o=Math.floor(t.points.length/2);r.display=!0,r.map.center=t.points[o].current_cordinate,t.time=r.time,e.$broadcast("plot:forecast",t)}}]);